angular.module("datoniApp.controllers").controller("OrderCheckController",function(e,r,t,o,n,a){e.orderId=o.lastOrderId,e.state="loading",e.gotoProfile=function(){r.go("tab.menu")},e.errorCount=0,e.check=function(){n.get(a.to("order/check/"+e.orderId)).success(function(r){1==r.status?(e.state="finished",clearInterval(e.timeInterval),o.$broadcast("cart:clear")):e.errorCount+=1})},e.rateApp=function(){t.promptForRating(!0)},e.closeModal=function(){window.$orderModal.hide(),r.go("tab.coupons")},e.timeInterval=setInterval(function(){e.check(),e.errorCount>10&&(clearInterval(e.timeInterval),window.$orderModal.hide(),alert("Wir konnten die Bestellung nicht abrufen. Bitte versuchen Sie es erneut oder kontaktieren Sie uns telefonisch unter 06434 90 99 40."),r.go("tab.menu"),n.get(a.to("order/destroy/"+e.orderId))),e.$$phase||e.$apply()},3e3)});