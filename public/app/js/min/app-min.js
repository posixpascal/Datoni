angular.module("dibari.angular-ellipsis",[]).directive("ellipsis",["$timeout","$window","$sce",function(t,e,l){var n=function(e){var l=null,n=[];this.remove=function(e){-1!==n.indexOf(e)&&(n.splice(n.indexOf(e),1),0===n.length&&(t.cancel(l),l=null))},this.add=function(a){-1===n.indexOf(a)&&n.push(a),l||(l=t(function(){var t=n.slice();l=null,n.length=0,t.forEach(function(t){t()})},e))}},a=new n(0),i=new n(75);return{restrict:"A",scope:{ngBind:"=",ngBindHtml:"=",ellipsisAppend:"@",ellipsisAppendClick:"&",ellipsisSymbol:"@",ellipsisSeparator:"@",useParent:"@",ellipsisSeparatorReg:"="},compile:function(t,n,r){return function(t,n,r){function s(t){var e=0;return angular.forEach(t.parent().children(),function(l){l!=t[0]&&(e+=l.clientHeight)}),t.parent()[0].clientHeight-e}function o(){var e=t.ngBind||t.ngBindHtml,a=!1;if(l.isEnabled()&&angular.isObject(e)&&l.getTrustedHtml(e)&&(a=!0,e=l.getTrustedHtml(e)),e){var i=!t.ngBind&&!!t.ngBindHtml,o=0,c="undefined"!=typeof r.ellipsisSymbol?r.ellipsisSymbol:"&hellip;",d="undefined"!=typeof t.ellipsisSeparator?r.ellipsisSeparator:" ",u="undefined"!=typeof t.ellipsisSeparatorReg?t.ellipsisSeparatorReg:!1,m="undefined"!=typeof t.ellipsisAppend&&""!==t.ellipsisAppend?c+"<span>"+t.ellipsisAppend+"</span>":c,f=u?e.match(u):e.split(d);if(r.isTruncated=!1,i?n.html(e):n.text(e),p(n,t.useParent)){var b=f.length,h=t.useParent?s(n):n[0].clientHeight;for(i?n.html(e+m):n.text(e).html(n.html()+m),n.attr("data-overflowed","true");b>o;o++)if(f.pop(),i?n.html(f.join(d)+m):n.text(f.join(d)).html(n.html()+m),(t.useParent?n.parent()[0]:n[0]).scrollHeight<h||p(n,t.useParent)===!1){r.isTruncated=!0;break}c!=m&&"undefined"!=typeof t.ellipsisAppendClick&&""!==t.ellipsisAppendClick&&n.find("span").bind("click",function(e){t.$apply(function(){t.ellipsisAppendClick.call(t,{event:e})})}),!a&&l.isEnabled()&&l.trustAsHtml(e)}}}function p(t,e){return t=e?t.parent():t,t[0].scrollHeight>t[0].clientHeight}function c(){(r.lastWindowResizeWidth!=window.innerWidth||r.lastWindowResizeHeight!=window.innerHeight)&&o(),r.lastWindowResizeWidth=window.innerWidth,r.lastWindowResizeHeight=window.innerHeight}function d(){i.add(c)}r.lastWindowResizeTime=0,r.lastWindowResizeWidth=0,r.lastWindowResizeHeight=0,r.lastWindowTimeoutEvent=null,r.isTruncated=!1,t.$watch("ngBind",function(){a.add(o)}),t.$watch("ngBindHtml",function(){a.add(o)}),t.$watch("ellipsisAppend",function(){o()});var u=angular.element(e);u.bind("resize",d),t.$on("$destroy",function(){u.unbind("resize",d),a.remove(o),i.remove(c)})}}}}]),angular.module("datoniApp",["ionic","ngAnimate","ngCordova","dibari.angular-ellipsis","datoniApp.controllers","datoniApp.services"]).run(function(t,e,l,n,a,i,r,s,o,p){s.badge={cart:0},t.ready(function(){"cordova"in window?r.getAppVersion().then(function(t){s.version=t}):s.version="2.0.0",a(function(){var t=""+ +new Date,e="";i.post(n.to("/ping"),{ping:t}).then(function(e){e.pong!==t?s.serverError=1:s.serverError=0})},2e4),s.$on("loading:show",function(){l.show({template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner><br/>Wird geladen...'})}),s.$on("loading:hide",function(){l.hide()}),s["goto"]=function(t){return o.open(t,"_blank",{location:"yes",clearcache:"yes",toolbar:"no"}),!1},"undefined"!=typeof AppRate&&($cordovaAppRateProvider.setPreferences({androidURL:"market://details?id=de.pascalraszyk.datoniapp",iosURL:"",appName:"Da Toni",language:"de",usesUntilPrompt:3,openStoreInApp:!1}),e.promptForRating()),s.rateApp=function(){e.promptForRating(!0)},window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault()})}).config(function(t,e,l,n,a){l.defaults.headers.common["X-API-KEY"]="018f07057ca5ea82299cccb7ce6c4c74",l.defaults.headers.common["X-API-TOKEN"]="eb730d12-29c8-4a86-a03f-2d2bc932832e","undefined"!=typeof AppRate,a.tabs.position("bottom"),a.tabs.style("standard"),e.state("tab",{url:"/tab","abstract":!0,templateUrl:"templates/tabs.html",controller:"TabCtrl"}).state("tab.dash",{url:"/dash",views:{"tab-dash":{templateUrl:"templates/tab-dash.html",controller:"DashCtrl"}}}).state("tab.coupons",{url:"/coupons",views:{"tab-coupons":{templateUrl:"templates/tab-coupons.html",controller:"CouponCtrl"}}}).state("tab.profile",{"abstract":!0,url:"/profile",views:{"tab-profile":{template:"<ion-nav-view></ion-nav-view>"}},controller:"ProfileCtrl"}).state("tab.profile.phonenumber",{url:"/phonenumber",templateUrl:"templates/profile/phonenumber.html",controller:"ProfileCtrl"}).state("tab.menu",{"abstract":!0,url:"/menu",views:{"tab-menu":{template:"<ion-nav-view></ion-nav-view>"}}}).state("tab.menu.list",{url:"",templateUrl:"templates/tab-menu-list.html",controller:"MenuCtrl"}).state("tab.menu.view",{url:"/view/:id",templateUrl:"templates/tab-menu-view.html",controller:"MenuViewCtrl"}).state("tab.cart",{"abstract":!0,url:"/cart",views:{"tab-cart":{template:"<ion-nav-view></ion-nav-view>"}}}).state("tab.cart.view",{url:"",templateUrl:"templates/tab-cart.html",controller:"MenuCartCtrl"}).state("tab.cart.checkout",{url:"/checkout",templateUrl:"templates/tab-menu-checkout.html",controller:"MenuCartCtrl"}).state("tab.cart.locations",{url:"/locations",templateUrl:"templates/tab-locations.html",controller:"LocationCtrl"}).state("tab.cart.address",{url:"/locations",templateUrl:"templates/tab-menu-address.html",controller:"LocationCtrl"}).state("tab.profile.view",{url:"",templateUrl:"templates/tab-profile.html",controller:"ProfileCtrl"}).state("tab.profile.orders",{url:"/orders",templateUrl:"templates/profile/orders.html",controller:"ProfileCtrl"}).state("tab.profile.order_success",{url:"/order-success",templateUrl:"templates/profile/order_success.html",controller:"ProfileCtrl"}).state("tab.profile.favorites",{url:"/favorites",templateUrl:"templates/profile/favorites.html",controller:"ProfileCtrl"}).state("tab.profile.address",{url:"/address",templateUrl:"templates/profile/address.html",controller:"ProfileCtrl"}).state("tab.settings",{"abstract":!0,url:"/settings",views:{"tab-settings":{template:"<ion-nav-view></ion-nav-view>"}}}).state("tab.settings.frontview",{url:"",templateUrl:"templates/tab-settings.html",controller:"SettingsCtrl"}).state("tab.settings.imprint",{url:"/settings/imprint",templateUrl:"templates/tab-settings-imprint.html",controller:"SettingsCtrl"}).state("tab.settings.dataprivacy",{url:"/settings/dataprivacy",templateUrl:"templates/tab-settings-dataprivacy.html",controller:"SettingsCtrl"}).state("tab.settings.disclaimer",{url:"/settings/disclaimer",templateUrl:"templates/tab-settings-disclaimer.html",controller:"SettingsCtrl"}).state("tab.specials",{url:"/specials",views:{"tab-specials":{templateUrl:"templates/tab-specials.html",controller:"SpecialsCtrl"}}}),n.otherwise("/tab/menu")});